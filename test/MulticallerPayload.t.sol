// SPDX-License-Identifier: Unlicense
pragma solidity ^0.8.15;

import "foundry-huff/HuffDeployer.sol";
import "forge-std/Test.sol";
import "forge-std/console.sol";

import "../src/ERC20.sol";
import "../src/interfaces/dydx/ISoloMargin.sol";
import "./Interface.sol";


contract MulticallerPayloadTest is Test {
    MultiCaller public multicaller;
    ERC20 public erc20Mock;
    ERC20 public erc20Mock2;

    uint256 private constant _INTERNAL_CALL_SELECTOR =    0x00000000000000000000000000000000000000000000fffffffffffffffffffd;
    uint256 private constant _STATIC_CALL_SELECTOR =    0x00000000000000000000000000000000000000000000fffffffffffffffffffe;
    uint256 private constant _DELEGATE_CALL_SELECTOR =  0x00000000000000000000000000000000000000000000ffffffffffffffffffff;

    /// @dev Setup the testing environment.
    function setUp() public {
        erc20Mock = new ERC20();
        erc20Mock2 = new ERC20();
        console.log(address(erc20Mock));
        console.log(address(erc20Mock2));
        multicaller = MultiCaller(HuffDeployer.deploy("Multicaller"));
        
        console.log("Multicaller:", address(multicaller));
        vm.deal(address(multicaller), 0.3 ether);

        
    }

    function testUniswapRawCallPayloadUni3Loan() public {
        (bool result, ) = address(multicaller).call(hex"284724170000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000032400000000000000000000030488e6a0c2ddd26feeb64f039a2c41296fcb3f5640128acb08000000000000000000000000549bc7ee4b85a2df5f74799f213483ce599f19990000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000016556535c00000000000000000000000000000000000000000000000000000001000276a400000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000240000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000001ec000000000000000000000044c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2095ea7b30000000000000000000000007a250d5630b4cf539739df2c5dacb4c659f2488d0000000000000000000000000000000000000000000000002e84153aa96cea000000000000000000000001047a250d5630b4cf539739df2c5dacb4c659f2488d38ed17390000000000000000000000000000000000000000000000002e84153aa96cea00000000000000000000000000000000000000000000000000000000016556535c00000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000549bc7ee4b85a2df5f74799f213483ce599f1999000000000000000000000000000000000000000000000000000000007fffffff0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2000000000000000000000000a0b86991c6218b36c1d19d4a2e9eb0ce3606eb48000000000000000000000044a0b86991c6218b36c1d19d4a2e9eb0ce3606eb48a9059cbb00000000000000000000000088e6a0c2ddd26feeb64f039a2c41296fcb3f5640000000000000000000000000000000000000000000000000000000016556535c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000");
        assertEq(result, true);
    }

    function testUniswapRawCallPayloadDyDxLoan() public {
        (bool result, ) = address(multicaller).call(hex"28472417000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000009840000000000000000000009641e0447b19bb6ecfdae1e4ae1694b0c3659614e4ea67a6a45000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000001000000000000000000000000549bc7ee4b85a2df5f74799f213483ce599f199900000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000001e00000000000000000000000000000000000000000000000000000000000000720000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002e84153aa96cea0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000549bc7ee4b85a2df5f74799f213483ce599f199900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000160000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000549bc7ee4b85a2df5f74799f213483ce599f19990000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000016000000000000000000000000000000000000000000000000000000000000003c000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000374000000000000000000000044c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2095ea7b30000000000000000000000007a250d5630b4cf539739df2c5dacb4c659f2488d0000000000000000000000000000000000000000000000002e84153aa96cea000000000000000000000001047a250d5630b4cf539739df2c5dacb4c659f2488d38ed17390000000000000000000000000000000000000000000000002e84153aa96cea00000000000000000000000000000000000000000000000000000000016556535c00000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000549bc7ee4b85a2df5f74799f213483ce599f1999000000000000000000000000000000000000000000000000000000007fffffff0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2000000000000000000000000a0b86991c6218b36c1d19d4a2e9eb0ce3606eb48000000000000000000000044a0b86991c6218b36c1d19d4a2e9eb0ce3606eb48095ea7b3000000000000000000000000e592427a0aece92de3edee1f18e0157c05861564000000000000000000000000000000000000000000000000000000016556535c000000000000000000000104e592427a0aece92de3edee1f18e0157c05861564414bf389000000000000000000000000a0b86991c6218b36c1d19d4a2e9eb0ce3606eb48000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc200000000000000000000000000000000000000000000000000000000000001f4000000000000000000000000549bc7ee4b85a2df5f74799f213483ce599f1999000000000000000000000000000000000000000000000000000000007fffffff000000000000000000000000000000000000000000000000000000016556535c0000000000000000000000000000000000000000000000002e710767f8767f6200000000000000000000000000000000000000000000000000000001000276a4000000000000000000000044c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2095ea7b30000000000000000000000001e0447b19bb6ecfdae1e4ae1694b0c3659614e4e0000000000000000000000000000000000000000000000002e84153aa96cea02000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002e84153aa96cea0200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000549bc7ee4b85a2df5f74799f213483ce599f199900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000160000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000");
        assertEq(result, true);
    }

    function testUniswapRawCallPayloadBalancerLoan() public {
        (bool result, ) = address(multicaller).call(hex"28472417000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000004a4000000000000000000000484ba12222222228d8ba445958a75a0704d566bf2c85c38449e000000000000000000000000549bc7ee4b85a2df5f74799f213483ce599f1999000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc200000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000002e84153aa96cea00000000000000000000000000000000000000000000000000000000000000036000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000310000000000000000000000044c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2095ea7b30000000000000000000000007a250d5630b4cf539739df2c5dacb4c659f2488d0000000000000000000000000000000000000000000000002e84153aa96cea000000000000000000000001047a250d5630b4cf539739df2c5dacb4c659f2488d38ed17390000000000000000000000000000000000000000000000002e84153aa96cea00000000000000000000000000000000000000000000000000000000016556535c00000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000549bc7ee4b85a2df5f74799f213483ce599f1999000000000000000000000000000000000000000000000000000000007fffffff0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2000000000000000000000000a0b86991c6218b36c1d19d4a2e9eb0ce3606eb48000000000000000000000044a0b86991c6218b36c1d19d4a2e9eb0ce3606eb48095ea7b3000000000000000000000000e592427a0aece92de3edee1f18e0157c05861564000000000000000000000000000000000000000000000000000000016556535c000000000000000000000104e592427a0aece92de3edee1f18e0157c05861564414bf389000000000000000000000000a0b86991c6218b36c1d19d4a2e9eb0ce3606eb48000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc200000000000000000000000000000000000000000000000000000000000001f4000000000000000000000000549bc7ee4b85a2df5f74799f213483ce599f1999000000000000000000000000000000000000000000000000000000007fffffff000000000000000000000000000000000000000000000000000000016556535c0000000000000000000000000000000000000000000000002e710767f8767f6200000000000000000000000000000000000000000000000000000001000276a40000000000000000000000000000000000000000000000000000000000000000000000000000000000000000");
        assertEq(result, true);
    }

    function testUniswapRawCallPayloadUni2Loan() public {
        (bool result, ) = address(multicaller).call(hex"28472417000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000002840000000000000000000002640d4a11d5eeaac28ec3f61d100daf4d40471f1852022c0d9f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001647074d7000000000000000000000000549bc7ee4b85a2df5f74799f213483ce599f1999000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000001c00000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000016c000000000000000000000044dac17f958d2ee523a2206206994597c13d831ec7095ea7b3000000000000000000000000d51a44d3fae010294c616388b506acda1bfaae4600000000000000000000000000000000000000000000000000000001647074d7000000000000000000000084d51a44d3fae010294c616388b506acda1bfaae465b41b9080000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000001647074d70000000000000000000000000000000000000000000000000000000000000000000000000000000000000044c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2a9059cbb0000000000000000000000000d4a11d5eeaac28ec3f61d100daf4d40471f18520000000000000000000000000000000000000000000000002e84153aa96cede8000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000");
        assertEq(result, true);
    }

    function testUniswapRawCallPayloadUni2Loan_Curve_Payout() public {
        (bool result, ) = address(multicaller).call(hex"28472417000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000003080000000000000000000002640d4a11d5eeaac28ec3f61d100daf4d40471f1852022c0d9f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001647074d7000000000000000000000000549bc7ee4b85a2df5f74799f213483ce599f1999000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000001c00000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000016c000000000000000000000044dac17f958d2ee523a2206206994597c13d831ec7095ea7b3000000000000000000000000d51a44d3fae010294c616388b506acda1bfaae4600000000000000000000000000000000000000000000000000000001647074d7000000000000000000000084d51a44d3fae010294c616388b506acda1bfaae465b41b9080000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000001647074d70000000000000000000000000000000000000000000000000000000000000000000000000000000000000044c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2a9059cbb0000000000000000000000000d4a11d5eeaac28ec3f61d100daf4d40471f18520000000000000000000000000000000000000000000000002e84153aa96cede80000000000000000000000000000000000000000fffffffffffffffffffd006486684b9768145d0f9ce2dcd32dd160866557fd1705ec9cad000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005e029792d2850b60b8c0c86c07854f520a8d8485000000000000000000000000000000000000000000000000");
        assertEq(result, true);
    }

    function testUniswapRawCallPayload_Uni3Uni3_Swap() public {
        (bool result, ) = address(multicaller).call(
            hex"28472417000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000002047ffc000000000000000001e44e68ccd3e89f51c3074ca5072bbac773960dfa36128acb08000000000000000000000000687bb6c57915aa2529efc7d2a26668855e022fae00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000464d6ade0000000000000000000000000fffd8963efd1fc6a506488495d951d5263988d2500000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000001207ffb00000000000000000003022a007ffc000000000082006400e411b815efb8f581194ae79006d24e0d814b7697f6128acb080000000000000000000000004e68ccd3e89f51c3074ca5072bbac773960dfa360000000000000000000000000000000000000000000000000000000000000001ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00000000000000000000000000000000000000000000000000000001000276a400000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000014c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
        );
        assertEq(result, true);

    }

    function testUniswapRawCallPayload_Uni2Uni2_Swap() public {
        (bool result, ) = address(multicaller).call(
            hex"28472417000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000002a47ffc00000000000000000284397ff1542f962076d0bfe58ea045ffa2d347aca0022c0d9f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008a050d5279d3a000000000000000000000000000687bb6c57915aa2529efc7d2a26668855e022fae000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000001e07ffd000000000000000000448bceaa18000000000000000000000000397ff1542f962076d0bfe58ea045ffa2d347aca00000000000000000000000000000000000000000000000008a050d5279d3a0007ffd000000000012003000449b81788b000000000000000000000000b4e16d0168e52d35cacd2c6185b44281ec28c9dc00000000000000000000000000000000000000000000000000000000000000007ffc00000000002200440044c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2a9059cbb000000000000000000000000b4e16d0168e52d35cacd2c6185b44281ec28c9dc00000000000000000000000000000000000000000000000000000000000000007ffc000000000012002400a4b4e16d0168e52d35cacd2c6185b44281ec28c9dc022c0d9f00000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000397ff1542f962076d0bfe58ea045ffa2d347aca00000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
        );
        assertEq(result, true);

    }

    function testUniswapRawCallPayload_Uni2Uni3_Swap() public {
        (bool result, ) = address(multicaller).call(
            hex"28472417000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000002647ffc0000000000000000024488e6a0c2ddd26feeb64f039a2c41296fcb3f5640128acb08000000000000000000000000687bb6c57915aa2529efc7d2a26668855e022fae0000000000000000000000000000000000000000000000000000000000000001ffffffffffffffffffffffffffffffffffffffffffffffffffffffffff67d91100000000000000000000000000000000000000000000000000000001000276a400000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000001807ffd000000000012003000449b81788b000000000000000000000000b4e16d0168e52d35cacd2c6185b44281ec28c9dc00000000000000000000000000000000000000000000000000000000000000007ffc00000000002200440044c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2a9059cbb000000000000000000000000b4e16d0168e52d35cacd2c6185b44281ec28c9dc00000000000000000000000000000000000000000000000000000000000000007ffc000000000012002400a4b4e16d0168e52d35cacd2c6185b44281ec28c9dc022c0d9f0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000088e6a0c2ddd26feeb64f039a2c41296fcb3f564000000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
        );
        assertEq(result, true);
    }


    function testUniswapRawCallPayload_Uni3Uni2_Swap() public {
        (bool result, ) = address(multicaller).call(
            hex"28472417000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000002647ffc0000000000000000024488e6a0c2ddd26feeb64f039a2c41296fcb3f5640128acb08000000000000000000000000b4e16d0168e52d35cacd2c6185b44281ec28c9dc00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008ac7230489e80000000000000000000000000000fffd8963efd1fc6a506488495d951d5263988d2500000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000001807ffd0000000000020030004484f16ca0000000000000000000000000b4e16d0168e52d35cacd2c6185b44281ec28c9dc00000000000000000000000000000000000000000000000000000000000000007ffc000000000022004400a4b4e16d0168e52d35cacd2c6185b44281ec28c9dc022c0d9f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000687bb6c57915aa2529efc7d2a26668855e022fae000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000007ffc00000000001200440044c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2a9059cbb00000000000000000000000088e6a0c2ddd26feeb64f039a2c41296fcb3f56400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
        );
        assertEq(result, true);
    }


    function testUniswapRawCallPayload_Uni3Uni3Uni3_Swap() public {
        (bool result, ) = address(multicaller).call(
            hex"28472417000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000003047ffc000000000000000002e44e68ccd3e89f51c3074ca5072bbac773960dfa36128acb08000000000000000000000000687bb6c57915aa2529efc7d2a26668855e022fae0000000000000000000000000000000000000000000000000000000000000000ffffffffffffffffffffffffffffffffffffffffffffffff761c750827b1e000000000000000000000000000fffd8963efd1fc6a506488495d951d5263988d2500000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000002207ffb00000000000000000003022a007ffc000000000022006401e47858e59e0c01ea06df3af3d20ac7b0003275d4bf128acb080000000000000000000000004e68ccd3e89f51c3074ca5072bbac773960dfa360000000000000000000000000000000000000000000000000000000000000001ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00000000000000000000000000000000000000000000000000000001000276a400000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000001207ffb00000000000000000003022a007ffc000000000022006400e48ad599c3a0ff1de082011efddc58f1908eb6e6d8128acb080000000000000000000000007858e59e0c01ea06df3af3d20ac7b0003275d4bf0000000000000000000000000000000000000000000000000000000000000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff000000000000000000000000fffd8963efd1fc6a506488495d951d5263988d2500000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000014c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
        );
    }

    function testUniswapRawCallPayload_Uni2Uni3Uni3_Swap() public {
        (bool result, ) = address(multicaller).call(
            hex"28472417000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000003647ffc000000000000000003444e68ccd3e89f51c3074ca5072bbac773960dfa36128acb08000000000000000000000000687bb6c57915aa2529efc7d2a26668855e022fae0000000000000000000000000000000000000000000000000000000000000000ffffffffffffffffffffffffffffffffffffffffffffffff7644df718ea8e000000000000000000000000000fffd8963efd1fc6a506488495d951d5263988d2500000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000002807ffb00000000000000000003022a007ffc000000000022006402447858e59e0c01ea06df3af3d20ac7b0003275d4bf128acb080000000000000000000000004e68ccd3e89f51c3074ca5072bbac773960dfa360000000000000000000000000000000000000000000000000000000000000001ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00000000000000000000000000000000000000000000000000000001000276a400000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000001807ffd000000000012003000449b81788b000000000000000000000000b4e16d0168e52d35cacd2c6185b44281ec28c9dc00000000000000000000000000000000000000000000000000000000000000017ffc00000000002200440044c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2a9059cbb000000000000000000000000b4e16d0168e52d35cacd2c6185b44281ec28c9dc00000000000000000000000000000000000000000000000000000000000000007ffc000000000012002400a4b4e16d0168e52d35cacd2c6185b44281ec28c9dc022c0d9f000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000007858e59e0c01ea06df3af3d20ac7b0003275d4bf0000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
        );
        assertEq(result, true);
    }

    function testUniswapRawCallPayload_Uni2Uni2Uni3_Swap() public {
        (bool result, ) = address(multicaller).call(
            hex"28472417000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000003847ffc000000000000000003644e68ccd3e89f51c3074ca5072bbac773960dfa36128acb08000000000000000000000000687bb6c57915aa2529efc7d2a26668855e022fae0000000000000000000000000000000000000000000000000000000000000000ffffffffffffffffffffffffffffffffffffffffffffffff76fbda0f072be000000000000000000000000000fffd8963efd1fc6a506488495d951d5263988d2500000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000002a07ffd000000000012003000448bceaa180000000000000000000000003041cbd36888becc7bbcbc0045e3b1f144466f5f00000000000000000000000000000000000000000000000000000000000000017ffd000000000022003000449b81788b000000000000000000000000b4e16d0168e52d35cacd2c6185b44281ec28c9dc00000000000000000000000000000000000000000000000000000000000000017ffc00000000003200440044c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2a9059cbb000000000000000000000000b4e16d0168e52d35cacd2c6185b44281ec28c9dc00000000000000000000000000000000000000000000000000000000000000007ffc000000000022002400a4b4e16d0168e52d35cacd2c6185b44281ec28c9dc022c0d9f000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000003041cbd36888becc7bbcbc0045e3b1f144466f5f000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000007ffc000000000012004400a43041cbd36888becc7bbcbc0045e3b1f144466f5f022c0d9f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000004e68ccd3e89f51c3074ca5072bbac773960dfa3600000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
        );
        assertEq(result, true);
    }

    function testUniswapRawCallPayload_Uni3Uni2Uni3_Swap() public {
        (bool result, ) = address(multicaller).call(
            hex"28472417000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000003247ffc000000000000000003044e68ccd3e89f51c3074ca5072bbac773960dfa36128acb08000000000000000000000000687bb6c57915aa2529efc7d2a26668855e022fae0000000000000000000000000000000000000000000000000000000000000000ffffffffffffffffffffffffffffffffffffffffffffffff76d3b77f3f24d000000000000000000000000000fffd8963efd1fc6a506488495d951d5263988d2500000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000002407ffd000000000012003000448bceaa180000000000000000000000003041cbd36888becc7bbcbc0045e3b1f144466f5f00000000000000000000000000000000000000000000000000000000000000017ffb00000000000000000003032a007ffc000000000032006400e48ad599c3a0ff1de082011efddc58f1908eb6e6d8128acb080000000000000000000000003041cbd36888becc7bbcbc0045e3b1f144466f5f0000000000000000000000000000000000000000000000000000000000000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff000000000000000000000000fffd8963efd1fc6a506488495d951d5263988d2500000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000014c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000007ffc000000000012004400a43041cbd36888becc7bbcbc0045e3b1f144466f5f022c0d9f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000004e68ccd3e89f51c3074ca5072bbac773960dfa36000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
        );
    }

    function testUniswapRawCallPayload_Uni3Uni2Uni2_Swap() public {
        (bool result, ) = address(multicaller).call(
            hex"28472417000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000003847ffc000000000000000003648ad599c3a0ff1de082011efddc58f1908eb6e6d8128acb080000000000000000000000003041cbd36888becc7bbcbc0045e3b1f144466f5f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008ac7230489e80000000000000000000000000000fffd8963efd1fc6a506488495d951d5263988d2500000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000002a07ffd0000000000020030004484f16ca00000000000000000000000003041cbd36888becc7bbcbc0045e3b1f144466f5f00000000000000000000000000000000000000000000000000000000000000017ffd0000000000220030004495b661620000000000000000000000000d4a11d5eeaac28ec3f61d100daf4d40471f185200000000000000000000000000000000000000000000000000000000000000017ffc000000000022004400a43041cbd36888becc7bbcbc0045e3b1f144466f5f022c0d9f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000d4a11d5eeaac28ec3f61d100daf4d40471f1852000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000007ffc000000000032002400a40d4a11d5eeaac28ec3f61d100daf4d40471f1852022c0d9f00000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000687bb6c57915aa2529efc7d2a26668855e022fae000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000007ffc00000000001200440044c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2a9059cbb0000000000000000000000008ad599c3a0ff1de082011efddc58f1908eb6e6d80000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
        );
        assertEq(result, true);

    }

    function testUniswapRawCallPayload_Uni2Uni3Uni2_Swap() public {
        (bool result, ) = address(multicaller).call(
            hex"28472417000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000003a47ffc000000000000000003840d4a11d5eeaac28ec3f61d100daf4d40471f1852022c0d9f00000000000000000000000000000000000000000000000089db54376595a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000687bb6c57915aa2529efc7d2a26668855e022fae000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000002e07ffd000000000002003000449b81788b0000000000000000000000000d4a11d5eeaac28ec3f61d100daf4d40471f185200000000000000000000000000000000000000000000000000000000000000017ffb00000000000000000003022a007ffc000000000022006402447858e59e0c01ea06df3af3d20ac7b0003275d4bf128acb080000000000000000000000000d4a11d5eeaac28ec3f61d100daf4d40471f18520000000000000000000000000000000000000000000000000000000000000001ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00000000000000000000000000000000000000000000000000000001000276a400000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000001807ffd000000000012003000449b81788b000000000000000000000000b4e16d0168e52d35cacd2c6185b44281ec28c9dc00000000000000000000000000000000000000000000000000000000000000017ffc00000000002200440044c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2a9059cbb000000000000000000000000b4e16d0168e52d35cacd2c6185b44281ec28c9dc00000000000000000000000000000000000000000000000000000000000000007ffc000000000012002400a4b4e16d0168e52d35cacd2c6185b44281ec28c9dc022c0d9f000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000007858e59e0c01ea06df3af3d20ac7b0003275d4bf000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
        );
        assertEq(result, true);
    }

    function testUniswapRawCallPayload_Uni3Uni3Uni2_Swap() public {
        (bool result, ) = address(multicaller).call(
            hex"28472417000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000003447ffc000000000000000003240d4a11d5eeaac28ec3f61d100daf4d40471f1852022c0d9f0000000000000000000000000000000000000000000000008a03c32cf3c5f0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000687bb6c57915aa2529efc7d2a26668855e022fae000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000002807ffd000000000002003000449b81788b0000000000000000000000000d4a11d5eeaac28ec3f61d100daf4d40471f185200000000000000000000000000000000000000000000000000000000000000017ffb00000000000000000003022a007ffc000000000022006401e47858e59e0c01ea06df3af3d20ac7b0003275d4bf128acb080000000000000000000000000d4a11d5eeaac28ec3f61d100daf4d40471f18520000000000000000000000000000000000000000000000000000000000000001ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00000000000000000000000000000000000000000000000000000001000276a400000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000001207ffb00000000000000000003022a007ffc000000000022006400e48ad599c3a0ff1de082011efddc58f1908eb6e6d8128acb080000000000000000000000007858e59e0c01ea06df3af3d20ac7b0003275d4bf0000000000000000000000000000000000000000000000000000000000000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff000000000000000000000000fffd8963efd1fc6a506488495d951d5263988d2500000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000014c02aaa39b223fe8d0a0e5c4f27ead9083c756cc200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
        );
        assertEq(result, true);

    }

    function testUniswapRawCallPayload_Uni2Uni2Uni2_Swap() public {
        (bool result, ) = address(multicaller).call(
            hex"28472417000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000003a47ffc000000000000000003840d4a11d5eeaac28ec3f61d100daf4d40471f1852022c0d9f00000000000000000000000000000000000000000000000089244769502d60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000687bb6c57915aa2529efc7d2a26668855e022fae000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000002e07ffd000000000002003000449b81788b0000000000000000000000000d4a11d5eeaac28ec3f61d100daf4d40471f185200000000000000000000000000000000000000000000000000000000000000017ffd000000000012003000448bceaa180000000000000000000000003041cbd36888becc7bbcbc0045e3b1f144466f5f00000000000000000000000000000000000000000000000000000000000000017ffd000000000022003000449b81788b000000000000000000000000b4e16d0168e52d35cacd2c6185b44281ec28c9dc00000000000000000000000000000000000000000000000000000000000000017ffc00000000003200440044c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2a9059cbb000000000000000000000000b4e16d0168e52d35cacd2c6185b44281ec28c9dc00000000000000000000000000000000000000000000000000000000000000007ffc000000000022002400a4b4e16d0168e52d35cacd2c6185b44281ec28c9dc022c0d9f000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000003041cbd36888becc7bbcbc0045e3b1f144466f5f000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000007ffc000000000012004400a43041cbd36888becc7bbcbc0045e3b1f144466f5f022c0d9f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000d4a11d5eeaac28ec3f61d100daf4d40471f1852000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
        );
        assertEq(result, true);
    }


    function testUniswapRawCallPayload_RecoverERC20() public {
        (bool result, ) = address(multicaller).call(
            hex"28472417000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000a8fffffffffffffffffffe00247f39c581f595b53c5cb19bd0b3f8da6c935e2ca070a082310000000000000000000000005e029792d2850b60b8c0c86c07854f520a8d84850000000000000000000000447f39c581f595b53c5cb19bd0b3f8da6c935e2ca0a9059cbb0000000000000000000000005e029792d2850b60b8c0c86c07854f520a8d84850000000000000000000000000000000000000000000000000411c8290cf7c1fa000000000000000000000000000000000000000000000000"
       );
        assertEq(result, true);
    }

    function testUniswapRawCallPayload_RecoverEth() public {
        (bool result, ) = address(multicaller).call(
            //hex"284724170000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000002000000429d069189e000000005e029792d2850b60b8c0c86c07854f520a8d8485"
            //hex"284724170000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000002000000429d069188ebdc00000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2"
            //hex"284724170000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000002400000429d069188ebdc00000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2d0e30db000000000000000000000000000000000000000000000000000000000"
            hex"284724170000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000002000000429d069000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2"
            //hex"284724170000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000002400000429d069000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2d0e30db000000000000000000000000000000000000000000000000000000000"
           );
        assertEq(result, true);
    }








}



